const ENV_CONFIG={development:{square:{appId:'sandbox-sq0idb-la5vJJA2HLYjNQN7LaOpxQ',locationId:'L56XRKHH91SEX',environment:'sandbox'},cloudinary:{cloudName:'PLACEHOLDER_CLOUD_NAME',uploadPreset:'PLACEHOLDER_PRESET'},googleCalendar:{calendarId:'PLACEHOLDER_CALENDAR_ID@group.calendar.google.com'},api:{baseUrl:'http://localhost:3000/api',timeout:30000},features:{realTimeBooking:true,photoUpload:true,smsNotifications:false,emailNotifications:true},debug:{enableLogging:true,mockPayments:true,skipValidation:false}},production:{square:{appId:'sq0idp-8ppjtDG8I7H8kNx2WfH5LQ',locationId:'L9MVPB33HG9N0',environment:'production'},cloudinary:{cloudName:'PRODUCTION_CLOUD_NAME',uploadPreset:'PRODUCTION_PRESET'},googleCalendar:{calendarId:'PRODUCTION_CALENDAR_ID@group.calendar.google.com'},api:{baseUrl:'https://api.streamlinedumpsters.com/api',timeout:30000},features:{realTimeBooking:true,photoUpload:true,smsNotifications:true,emailNotifications:true},debug:{enableLogging:false,mockPayments:false,skipValidation:false}}};function detectEnvironment(){if(typeof process !=='undefined' && process.env && process.env.NODE_ENV){return process.env.NODE_ENV==='production' ? 'production':'development';}const hostname=window.location.hostname;const protocol=window.location.protocol;const isDevelopment=hostname==='localhost' || hostname==='127.0.0.1' || hostname.startsWith('192.168.')|| hostname.includes('dev.')|| hostname.includes('staging.')|| protocol==='file:';if(isDevelopment){if(typeof window.Logger !=='undefined' && window.console.warn){console.warn('ðŸ  Running in development mode - CORS issues may occur');console.warn('ðŸ’¡ If you see CORS errors,add headers to your Google Apps Script');console.warn('ðŸ“ Current origin:',window.location.origin);}else{console.warn('ðŸ  Running in development mode - CORS issues may occur');}return 'development';}return 'production';}const CURRENT_ENV=detectEnvironment();const CONFIG=ENV_CONFIG[CURRENT_ENV];CONFIG.environment=CURRENT_ENV;CONFIG.isDevelopment=CURRENT_ENV==='development';CONFIG.isProduction=CURRENT_ENV==='production';CONFIG.endpoints={booking:{create:`${CONFIG.api.baseUrl}/bookings`,update:`${CONFIG.api.baseUrl}/bookings/:id`,get:`${CONFIG.api.baseUrl}/bookings/:id`,list:`${CONFIG.api.baseUrl}/bookings`,cancel:`${CONFIG.api.baseUrl}/bookings/:id/cancel`},junkRemoval:{quote:`${CONFIG.api.baseUrl}/junk-removal/quote`,upload:`${CONFIG.api.baseUrl}/junk-removal/upload`,submit:`${CONFIG.api.baseUrl}/junk-removal/submit`},contact:{submit:`${CONFIG.api.baseUrl}/contact`,subscribe:`${CONFIG.api.baseUrl}/newsletter/subscribe`},availability:{check:`${CONFIG.api.baseUrl}/availability/check`,slots:`${CONFIG.api.baseUrl}/availability/slots`},payment:{process:`${CONFIG.api.baseUrl}/payments/process`,verify:`${CONFIG.api.baseUrl}/payments/verify`,refund:`${CONFIG.api.baseUrl}/payments/refund`}};CONFIG.pricing={dumpster:{size14Yard:{basePrice:299,currency:'USD',duration:3,description:'14-yard dumpster rental for 3 days'}},junkRemoval:{minimum:75,currency:'USD',description:'Custom quote based on items and volume'}};CONFIG.booking={GAS_WEB_APP_URL:'https://script.google.com/macros/s/AKfycby71qGfhAnK3h7HYXq_vM4n9rEZ7tswjWVXUIGrCdLY7iZi4U9ZGunX2lLRi19-A-j2dw/exec',BOOKING_PRICE:299,MIN_RENTAL_DAYS:1,MAX_ADVANCE_DAYS:90,TIME_SLOTS:[{value:"07:00-09:00",label:"7:00 AM - 9:00 AM"},{value:"09:00-11:00",label:"9:00 AM - 11:00 AM"},{value:"11:00-13:00",label:"11:00 AM - 1:00 PM"},{value:"13:00-15:00",label:"1:00 PM - 3:00 PM"},{value:"15:00-17:00",label:"3:00 PM - 5:00 PM"},{value:"17:00-19:00",label:"5:00 PM - 7:00 PM"},{value:"19:00-21:00",label:"7:00 PM - 9:00 PM"}],VALIDATION_PATTERNS:{PHONE:/^\(\d{3}\)\s\d{3}-\d{4}$/,EMAIL:/^[^\s@]+@[^\s@]+\.[^\s@]+$/,NAME_MIN_LENGTH:2,NAME_MAX_LENGTH:50}};CONFIG.junkRemoval={MAX_PHOTOS:5,MAX_FILE_SIZE:10 * 1024 * 1024,ALLOWED_FILE_TYPES:['image/jpeg','image/jpg','image/png','image/webp'],VALIDATION_PATTERNS:{PHONE:/^\(\d{3}\)\s\d{3}-\d{4}$/,EMAIL:/^[^\s@]+@[^\s@]+\.[^\s@]+$/,NAME_MIN_LENGTH:2,NAME_MAX_LENGTH:50,ADDRESS_MIN_LENGTH:5,ADDRESS_MAX_LENGTH:100,DESCRIPTION_MAX_LENGTH:500},ENDPOINTS:{SUBMIT_REQUEST:`${CONFIG.api.baseUrl}/junk-removal/submit`,UPLOAD_PHOTOS:`${CONFIG.api.baseUrl}/junk-removal/upload`},UI:{DROPZONE_HEIGHT:'120px',PREVIEW_SIZE:'100px',ANIMATION_DURATION:300},DEBUG:{ENABLE_CONSOLE_LOGGING:true,LOG_LEVEL:'normal'}};CONFIG.business={name:'Streamline Dumpsters Ltd.',location:'Dublin,Ohio',serviceArea:{primary:'Dublin,OH',radius:25,zipcodes:['43016','43017','43026','43035']},hours:{monday:'7:00 AM - 6:00 PM',tuesday:'7:00 AM - 6:00 PM',wednesday:'7:00 AM - 6:00 PM',thursday:'7:00 AM - 6:00 PM',friday:'7:00 AM - 6:00 PM',saturday:'8:00 AM - 4:00 PM',sunday:'Emergency service only'}};CONFIG.validation={phone:/^[\+]?[1-9][\d]{0,15}$/,email:/^[^\s@]+@[^\s@]+\.[^\s@]+$/,zipcode:/^\d{5}(-\d{4})?$/,address:{minLength:10,maxLength:200},images:{maxSize:5 * 1024 * 1024,allowedTypes:['image/jpeg','image/png','image/webp'],maxFiles:10}};CONFIG.rateLimits={api:{requestsPerMinute:60,burstLimit:10},uploads:{requestsPerMinute:10,maxConcurrent:3}};if(typeof module !=='undefined' && module.exports){module.exports=CONFIG;}else{window.CONFIG=CONFIG;}if(CONFIG.debug.enableLogging){if(typeof window.Logger !=='undefined' && window.console.log){console.log('ðŸ”§ Configuration loaded:',{environment:CURRENT_ENV,api:CONFIG.api.baseUrl,features:CONFIG.features,debug:CONFIG.debug});}else{console.log('ðŸ”§ Configuration loaded:',{environment:CURRENT_ENV,api:CONFIG.api.baseUrl,features:CONFIG.features,debug:CONFIG.debug});}}(function(){'use strict';const log=console.log;const warn=console.warn;const error=console.error;async function loadComponent(componentPath,referenceSelector){try{const response=await fetch(componentPath);if(!response.ok){throw new Error(`Failed to load ${componentPath}:${response.statusText}`);}const html=await response.text();const referenceElement=document.querySelector(referenceSelector);if(!referenceElement){warn(`Reference element "${referenceSelector}" not found for ${componentPath}`);document.body.insertAdjacentHTML('beforeend',html);return;}referenceElement.insertAdjacentHTML('beforebegin',html);log(`âœ“ Loaded component:${componentPath}`);setTimeout(()=>{if(componentPath.includes('booking-modal')){const modal=document.getElementById('bookingModal');log(` - Modal in DOM after insert:`,!!modal);}},10);}catch(err){error(`Error loading component ${componentPath}:`,err);}}async function loadModals(){const scripts=document.querySelector('script[src*="core.min.js"]')|| document.querySelector('script[src*="features.min.js"]')|| document.querySelector('script[src*="config.js"]')|| document.querySelector('script[src*="bookNow.js"]')|| document.querySelector('script[src*="index-main"]');if(!scripts){warn('Modal loader:Could not find reference element for modal injection');return;}const needsBookingModal=document.getElementById('openBookingModal');const needsJunkModal=document.getElementById('openJunkModal');const loadPromises=[];const referenceSelector='script[src*="features.min.js"],script[src*="core.min.js"],script[src*="config.js"],script[src*="bookNow.js"],script[src*="index-main"]';if(needsBookingModal){loadPromises.push(loadComponent('components/booking-modal.html',referenceSelector));}if(needsJunkModal){loadPromises.push(loadComponent('components/junk-modal.html',referenceSelector));}await Promise.all(loadPromises);log('ðŸ“¦ All modal components loaded,dispatching modalsLoaded event');log(' - bookingModal exists:',!!document.getElementById('bookingModal'));log(' - openBookingModal button exists:',!!document.getElementById('openBookingModal'));document.dispatchEvent(new CustomEvent('modalsLoaded'));}if(document.readyState==='loading'){document.addEventListener('DOMContentLoaded',loadModals);}else{loadModals();}})();